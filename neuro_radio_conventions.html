<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Neuroimaging in Python &mdash; NiBabel 2.0.2 documentation</title>
    
    <link rel="stylesheet" href="_static/nibabel.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="NiBabel 2.0.2 documentation" href="index.html" />
    <link rel="up" title="General tutorials" href="tutorials.html" />
    <link rel="next" title="Introduction to DICOM" href="dicom/dicom_intro.html" />
    <link rel="prev" title="Coordinate systems and affines" href="coordinate_systems.html" />
  <meta name="keywords" content="nipy, neuroimaging, python, neuroscience">

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding-left: 150px; padding-bottom:50px; padding-top:20px; background-image: url(_static/nipy-logo-bg-138x120.png); background-repeat: no-repeat;">
<h1>NiBabel</h1>
<h3 style="margin-top:-5px;color:#2f83c8">Access a cacophony of neuro-imaging file formats</h3>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dicom/dicom_intro.html" title="Introduction to DICOM"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="coordinate_systems.html" title="Coordinate systems and affines"
             accesskey="P">previous</a> |</li>
  <li><a href="http://nipy.org/">Community</a> |&nbsp;</li>
  <li><a href="index.html">NiBabel Home</a> |&nbsp;</li>
  <li><a href="https://mail.python.org/mailman/listinfo/neuroimaging">Mailing list</a> |&nbsp;</li>
  <li><a href="legal.html">License</a> |&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="tutorials.html" accesskey="U">General tutorials</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Radiological vs neurological conventions</a><ul>
<li><a class="reference internal" href="#neurological-and-radiological-display-convention">Neurological and radiological display convention</a></li>
<li><a class="reference internal" href="#alignment-of-world-and-voxel-axes">Alignment of world and voxel axes</a></li>
<li><a class="reference internal" href="#neurological-radiological-voxel-layout">Neurological / radiological voxel layout</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="coordinate_systems.html"
                        title="previous chapter">Coordinate systems and affines</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dicom/dicom_intro.html"
                        title="next chapter">Introduction to DICOM</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/neuro_radio_conventions.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<p><img src="_static/reggie.png" alt="Reggie -- the one" /></p>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="radiological-vs-neurological-conventions">
<h1>Radiological vs neurological conventions<a class="headerlink" href="#radiological-vs-neurological-conventions" title="Permalink to this headline">¶</a></h1>
<p>It is relatively common to talk about images being in &#8220;radiological&#8221; compared
to &#8220;neurological&#8221; convention, but the terms can be used in different and
confusing ways.</p>
<p>See <a class="reference internal" href="coordinate_systems.html"><em>Coordinate systems and affines</em></a> for background on voxel space, reference space
and affines.</p>
<div class="section" id="neurological-and-radiological-display-convention">
<h2>Neurological and radiological display convention<a class="headerlink" href="#neurological-and-radiological-display-convention" title="Permalink to this headline">¶</a></h2>
<p>Radiologists like looking at their images with the patient&#8217;s left on the right
of the image.   If they are looking at a brain image, it is as if they were
looking at the brain slice from the point of view of the patient&#8217;s feet.
Neurologists like looking at brain images with the patient&#8217;s right on the
right of the image.  This perspective is as if the neurologist is looking at
the slice from the top of the patient&#8217;s head.  The convention is one of image
display. The image can have any voxel arrangement on disk or memory, and any
output reference space; it is only necessary for the software displaying the
image to know the reference space and the (probably affine) mapping between
voxel space and reference space; then the software can work out which voxels
are on the left or right of the subject and flip the images to the taste of
the viewer. We could unpack these uses as <em>neurological display convention</em>
and <em>radiological display convention</em>.</p>
</div>
<div class="section" id="alignment-of-world-and-voxel-axes">
<h2>Alignment of world and voxel axes<a class="headerlink" href="#alignment-of-world-and-voxel-axes" title="Permalink to this headline">¶</a></h2>
<p>As we will see in the next section, radiological and neurological are
sometimes used to refer to particular alignments of the voxel input axes to
scanner RAS+ output axes. If we look at the affine mapping between voxel space
and scanner RAS+, we may find that moving along the first voxel axis by one
unit results in a equivalent scanner RAS+ movement that is mainly left to
right.  This can happen with a diagonal 3x3 part of the affine mapping to
scanner RAS+ (see <a class="reference internal" href="coordinate_systems.html"><em>Coordinate systems and affines</em></a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nibabel.affines</span> <span class="kn">import</span> <span class="n">apply_affine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">diag_affine</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                        <span class="p">[</span><span class="mi">0</span><span class="p">,</span>  <span class="mf">3.</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                        <span class="p">[</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                        <span class="p">[</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ijk</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># moving one unit on the first voxel axis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_affine</span><span class="p">(</span><span class="n">diag_affine</span><span class="p">,</span> <span class="n">ijk</span><span class="p">)</span>
<span class="go">array([ 3.,  0.,  0.])</span>
</pre></div>
</div>
<p>In this case the voxel axes are aligned to the output axes, in the sense that
moving in a positive direction on the first voxel axis results in increasing
values on the &#8220;R+&#8221; output axis, and similarly for the second voxel axis with
output &#8220;A+&#8221; and the third voxel axis with output &#8220;S+&#8221;.</p>
<p>Some people therefore refer to this alignment of voxel and RAS+ axes as
<em>RAS voxel axes</em>.</p>
</div>
<div class="section" id="neurological-radiological-voxel-layout">
<h2>Neurological / radiological voxel layout<a class="headerlink" href="#neurological-radiological-voxel-layout" title="Permalink to this headline">¶</a></h2>
<p>Very confusingly, some people refer to images with RAS voxel axes as having
&#8220;neurological&#8221; voxel layout. This is because the simplest way to display
slices from this voxel array will result in the left of the subject appearing
towards the left hand side of the screen and therefore neurological display
convention. If we take a slice <span class="math">\(k\)</span> over the third axis of the image data array
(<code class="docutils literal"><span class="pre">img_data[:,</span> <span class="pre">:,</span> <span class="pre">k]</span></code>), the resulting slice will have a first array axis
going from left to right in terms of spatial position and the second array
axis going from posterior to anterior.  If we display this image with the
first axis going from left to right on screen and the second from bottom to
top, it will have the subject&#8217;s right towards the right of the screen, and
anterior towards the top of the screen, as neurologists like it.  Here we are
showing the middle slice of <a class="reference download internal" href="_downloads/someones_anatomy.nii.gz"><code class="xref download docutils literal"><span class="pre">an</span> <span class="pre">image</span></code></a> with RAS voxel axes:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nibabel</span> <span class="kn">as</span> <span class="nn">nib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;downloads/someones_anatomy.nii.gz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The 3x3 part of the affine is diagonal with all +ve values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">affine</span>
<span class="go">array([[  2.75,   0.  ,   0.  , -78.  ],</span>
<span class="go">       [  0.  ,   2.75,   0.  , -91.  ],</span>
<span class="go">       [  0.  ,   0.  ,   2.75, -91.  ],</span>
<span class="go">       [  0.  ,   0.  ,   0.  ,   1.  ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img_data</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_slice</span> <span class="o">=</span> <span class="n">img_data</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">28</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Need transpose to put first axis left-right, second bottom-top</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">a_slice</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">)</span>  
</pre></div>
</div>
<p>(<a class="reference external" href=".//neuro_radio_conventions-2.png">png</a>, <a class="reference external" href=".//neuro_radio_conventions-2.hires.png">hires.png</a>, <a class="reference external" href=".//neuro_radio_conventions-2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/neuro_radio_conventions-2.png" src="_images/neuro_radio_conventions-2.png" />
</div>
<p>This slice does have the voxels from the right of isocenter towards the right
of the screen, neurology style.</p>
<p>Similarly, an &#8220;LAS&#8221; alignment of voxel axes to RAS+ axes would result in an
image with the left of the subject towards the right of the screen, as
radiologists like it.  &#8220;LAS&#8221; voxel axes can also be called &#8220;radiological&#8221;
voxel layout for this reason <a class="footnote-reference" href="#memory-layout" id="id1">[1]</a>.</p>
<p>Over time it has become more common for the scanner to generate images with
almost any orientation of the voxel axes relative to the reference axes.
Maybe for this reason, the terms &#8220;radiological&#8221; and &#8220;neurological&#8221; are less
commonly used as applied to voxel layout.  We nipyers try to avoid the
terms neurological or radiological for voxel layout because they can make it
harder to separate the idea of voxel and reference space axes and the affine
as a mapping between them.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="memory-layout" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>We have deliberately not fully defined what we mean by
&#8220;voxel layout&#8221; in the text.  Conceptually, an image array could be stored
in any layout on disk; the definition of the image format specifies how
the image reader should interpret the data on disk to return the right
array value for a given voxel coordinate.  The relationship of the values
on disk to the coordinate values in the array has no bearing on the fact
that the voxel axes align to the output axes.  In practice the terms RAS /
neurological and LAS / radiogical as applied to voxel layout appear to
refer exclusively to the situation where image arrays are stored in
&#8220;Fortran array layout&#8221; on disk.  Imagine an image array of shape <span class="math">\((I, J,
K)\)</span> with values of length <span class="math">\(v\)</span>. For an image of 64-bit floating point
values, <span class="math">\(v = 8\)</span>. An image array is stored in Fortran array layout only if
the value for voxel coordinate (1, 0, 0) is <span class="math">\(v\)</span> bytes on disk from the
value for (0, 0, 0); (0, 1, 0) is <span class="math">\(I * v\)</span> bytes from (0, 0, 0); and (0, 0,
1) is <span class="math">\(I * J * v\)</span> bytes from (0, 0, 0).  <a class="reference external" href="http://www.grahamwideman.com/gw/brain/analyze/formatdoc.htm">Analyze</a> and <a class="reference external" href="http://nifti.nimh.nih.gov">NIfTI</a> images use
Fortran array layout.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2006-2015, Matthew Brett, Michael Hanke and Eric Larson &lt;nipy-devel@neuroimaging.scipy.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>