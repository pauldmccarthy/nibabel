<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Neuroimaging in Python &mdash; NiBabel 2.0.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/nibabel.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="NiBabel 2.0.2 documentation" href="../index.html" />
    <link rel="up" title="API Documentation" href="../api.html" />
    <link rel="next" title="volumeutils" href="nibabel.volumeutils.html" />
    <link rel="prev" title="quaternions" href="nibabel.quaternions.html" />
  <meta name="keywords" content="nipy, neuroimaging, python, neuroscience">

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding-left: 150px; padding-bottom:50px; padding-top:20px; background-image: url(../_static/nipy-logo-bg-138x120.png); background-repeat: no-repeat;">
<h1>NiBabel</h1>
<h3 style="margin-top:-5px;color:#2f83c8">Access a cacophony of neuro-imaging file formats</h3>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="nibabel.volumeutils.html" title="volumeutils"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nibabel.quaternions.html" title="quaternions"
             accesskey="P">previous</a> |</li>
  <li><a href="http://nipy.org/">Community</a> |&nbsp;</li>
  <li><a href="../index.html">NiBabel Home</a> |&nbsp;</li>
  <li><a href="https://mail.python.org/mailman/listinfo/neuroimaging">Mailing list</a> |&nbsp;</li>
  <li><a href="legal.html">License</a> |&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../api.html" accesskey="U">API Documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">spatialimages</span></code></a><ul>
<li><a class="reference internal" href="#there-are-several-ways-of-writing-data">There are several ways of writing data.</a></li>
<li><a class="reference internal" href="#files-interface">Files interface</a></li>
<li><a class="reference internal" href="#header"><code class="docutils literal"><span class="pre">Header</span></code></a></li>
<li><a class="reference internal" href="#headerdataerror"><code class="docutils literal"><span class="pre">HeaderDataError</span></code></a></li>
<li><a class="reference internal" href="#headertypeerror"><code class="docutils literal"><span class="pre">HeaderTypeError</span></code></a></li>
<li><a class="reference internal" href="#imagedataerror"><code class="docutils literal"><span class="pre">ImageDataError</span></code></a></li>
<li><a class="reference internal" href="#imagefileerror"><code class="docutils literal"><span class="pre">ImageFileError</span></code></a></li>
<li><a class="reference internal" href="#spatialimage"><code class="docutils literal"><span class="pre">SpatialImage</span></code></a></li>
<li><a class="reference internal" href="#supported-np-types">supported_np_types</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="nibabel.quaternions.html"
                        title="previous chapter"><code class="docutils literal"><span class="pre">quaternions</span></code></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="nibabel.volumeutils.html"
                        title="next chapter"><code class="docutils literal"><span class="pre">volumeutils</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/nibabel.spatialimages.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<p><img src="../_static/reggie.png" alt="Reggie -- the one" /></p>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-nibabel.spatialimages">
<span id="spatialimages"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">spatialimages</span></code><a class="headerlink" href="#module-nibabel.spatialimages" title="Permalink to this headline">¶</a></h1>
<p>A simple spatial image class</p>
<p>The image class maintains the association between a 3D (or greater)
array, and an affine transform that maps voxel coordinates to some world space.
It also has a <code class="docutils literal"><span class="pre">header</span></code> - some standard set of meta-data that is specific to
the image format, and <code class="docutils literal"><span class="pre">extra</span></code> - a dictionary container for any other
metadata.</p>
<p>It has attributes:</p>
<blockquote>
<div><ul class="simple">
<li>extra</li>
</ul>
</div></blockquote>
<p>methods:</p>
<blockquote>
<div><ul class="simple">
<li>.get_data()</li>
<li>.get_affine() (deprecated, use affine property instead)</li>
<li>.get_header() (deprecated, use header property instead)</li>
<li>.to_filename(fname) - writes data to filename(s) derived from
<code class="docutils literal"><span class="pre">fname</span></code>, where the derivation may differ between formats.</li>
<li>to_file_map() - save image to files with which the image is already
associated.</li>
<li>.get_shape() (deprecated)</li>
</ul>
</div></blockquote>
<p>properties:</p>
<blockquote>
<div><ul class="simple">
<li>shape</li>
<li>affine</li>
<li>header</li>
<li>dataobj</li>
</ul>
</div></blockquote>
<p>classmethods:</p>
<blockquote>
<div><ul class="simple">
<li>from_filename(fname) - make instance by loading from filename</li>
<li>from_file_map(fmap) - make instance from file map</li>
<li>instance_to_filename(img, fname) - save <code class="docutils literal"><span class="pre">img</span></code> instance to
filename <code class="docutils literal"><span class="pre">fname</span></code>.</li>
</ul>
</div></blockquote>
<p>You cannot slice an image, and trying to slice an image generates an
informative TypeError.</p>
<div class="section" id="there-are-several-ways-of-writing-data">
<h2>There are several ways of writing data.<a class="headerlink" href="#there-are-several-ways-of-writing-data" title="Permalink to this headline">¶</a></h2>
<p>There is the usual way, which is the default:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">img</span><span class="o">.</span><span class="n">to_filename</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</pre></div>
</div>
<p>and that is, to take the data encapsulated by the image and cast it to
the datatype the header expects, setting any available header scaling
into the header to help the data match.</p>
<p>You can load the data into an image from file with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">img</span><span class="o">.</span><span class="n">from_filename</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</pre></div>
</div>
<p>The image stores its associated files in its <code class="docutils literal"><span class="pre">file_map</span></code> attribute.  In order
to just save an image, for which you know there is an associated filename, or
other storage, you can do:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">img</span><span class="o">.</span><span class="n">to_file_map</span><span class="p">()</span>
</pre></div>
</div>
<p>You can get the data out again with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
</pre></div>
</div>
<p>Less commonly, for some image types that support it, you might want to
fetch out the unscaled array via the object containing the data:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">unscaled_data</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">dataoobj</span><span class="o">.</span><span class="n">get_unscaled</span><span class="p">()</span>
</pre></div>
</div>
<p>Analyze-type images (including nifti) support this, but others may not
(MINC, for example).</p>
<p>Sometimes you might to avoid any loss of precision by making the
data type the same as the input:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">hdr</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">header</span>
<span class="n">hdr</span><span class="o">.</span><span class="n">set_data_dtype</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">to_filename</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="files-interface">
<h2>Files interface<a class="headerlink" href="#files-interface" title="Permalink to this headline">¶</a></h2>
<p>The image has an attribute <code class="docutils literal"><span class="pre">file_map</span></code>.  This is a mapping, that has keys
corresponding to the file types that an image needs for storage.  For
example, the Analyze data format needs an <code class="docutils literal"><span class="pre">image</span></code> and a <code class="docutils literal"><span class="pre">header</span></code>
file type for storage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nibabel</span> <span class="kn">as</span> <span class="nn">nib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">AnalyzeImage</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">file_map</span><span class="p">)</span>
<span class="go">[&#39;header&#39;, &#39;image&#39;]</span>
</pre></div>
</div>
<p>The values of <code class="docutils literal"><span class="pre">file_map</span></code> are not in fact files but objects with
attributes <code class="docutils literal"><span class="pre">filename</span></code>, <code class="docutils literal"><span class="pre">fileobj</span></code> and <code class="docutils literal"><span class="pre">pos</span></code>.</p>
<p>The reason for this interface, is that the contents of files has to
contain enough information so that an existing image instance can save
itself back to the files pointed to in <code class="docutils literal"><span class="pre">file_map</span></code>.  When a file holder
holds active file-like objects, then these may be affected by the
initial file read; in this case, the contains file-like objects need to
carry the position at which a write (with <code class="docutils literal"><span class="pre">to_files</span></code>) should place the
data.  The <code class="docutils literal"><span class="pre">file_map</span></code> contents should therefore be such, that this will
work:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># write an image to files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_map</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">AnalyzeImage</span><span class="o">.</span><span class="n">make_file_map</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_map</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fileobj</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_map</span><span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fileobj</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">AnalyzeImage</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">file_map</span> <span class="o">=</span> <span class="n">file_map</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">to_file_map</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read it back again from the written files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img2</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">AnalyzeImage</span><span class="o">.</span><span class="n">from_file_map</span><span class="p">(</span><span class="n">file_map</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">img2</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span> <span class="o">==</span> <span class="n">data</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># write, read it again</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img2</span><span class="o">.</span><span class="n">to_file_map</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img3</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">AnalyzeImage</span><span class="o">.</span><span class="n">from_file_map</span><span class="p">(</span><span class="n">file_map</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">img3</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span> <span class="o">==</span> <span class="n">data</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.spatialimages.Header" title="nibabel.spatialimages.Header"><code class="xref py py-obj docutils literal"><span class="pre">Header</span></code></a>([data_dtype,&nbsp;shape,&nbsp;zooms])</td>
<td>Template class to implement header protocol</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.spatialimages.HeaderDataError" title="nibabel.spatialimages.HeaderDataError"><code class="xref py py-obj docutils literal"><span class="pre">HeaderDataError</span></code></a></td>
<td>Class to indicate error in getting or setting header data</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.spatialimages.HeaderTypeError" title="nibabel.spatialimages.HeaderTypeError"><code class="xref py py-obj docutils literal"><span class="pre">HeaderTypeError</span></code></a></td>
<td>Class to indicate error in parameters into header functions</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.spatialimages.ImageDataError" title="nibabel.spatialimages.ImageDataError"><code class="xref py py-obj docutils literal"><span class="pre">ImageDataError</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.spatialimages.ImageFileError" title="nibabel.spatialimages.ImageFileError"><code class="xref py py-obj docutils literal"><span class="pre">ImageFileError</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.spatialimages.SpatialImage" title="nibabel.spatialimages.SpatialImage"><code class="xref py py-obj docutils literal"><span class="pre">SpatialImage</span></code></a>(dataobj,&nbsp;affine[,&nbsp;header,&nbsp;...])</td>
<td>Initialize image</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.spatialimages.supported_np_types" title="nibabel.spatialimages.supported_np_types"><code class="xref py py-obj docutils literal"><span class="pre">supported_np_types</span></code></a>(obj)</td>
<td>Numpy data types that instance <cite>obj</cite> supports</td>
</tr>
</tbody>
</table>
<div class="section" id="header">
<h2><a class="reference internal" href="#nibabel.spatialimages.Header" title="nibabel.spatialimages.Header"><code class="xref py py-class docutils literal"><span class="pre">Header</span></code></a><a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nibabel.spatialimages.Header">
<em class="property">class </em><code class="descclassname">nibabel.spatialimages.</code><code class="descname">Header</code><span class="sig-paren">(</span><em>data_dtype=&lt;type 'numpy.float32'&gt;</em>, <em>shape=(0</em>, <em>)</em>, <em>zooms=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Template class to implement header protocol</p>
<dl class="method">
<dt id="nibabel.spatialimages.Header.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data_dtype=&lt;type 'numpy.float32'&gt;</em>, <em>shape=(0</em>, <em>)</em>, <em>zooms=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy object to independent representation</p>
<p>The copy should not be affected by any changes to the original
object.</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.data_from_fileobj">
<code class="descname">data_from_fileobj</code><span class="sig-paren">(</span><em>fileobj</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.data_from_fileobj" title="Permalink to this definition">¶</a></dt>
<dd><p>Read binary image data from <cite>fileobj</cite></p>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.spatialimages.Header.data_layout">
<code class="descname">data_layout</code><em class="property"> = 'F'</em><a class="headerlink" href="#nibabel.spatialimages.Header.data_layout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.data_to_fileobj">
<code class="descname">data_to_fileobj</code><span class="sig-paren">(</span><em>data</em>, <em>fileobj</em>, <em>rescale=True</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.data_to_fileobj" title="Permalink to this definition">¶</a></dt>
<dd><p>Write array data <cite>data</cite> as binary to <cite>fileobj</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : array-like</p>
<blockquote>
<div><p>data to write</p>
</div></blockquote>
<p><strong>fileobj</strong> : file-like object</p>
<blockquote>
<div><p>file-like object implementing &#8216;write&#8217;</p>
</div></blockquote>
<p><strong>rescale</strong> : {True, False}, optional</p>
<blockquote class="last">
<div><p>Whether to try and rescale data to match output dtype specified by
header. For this minimal header, <cite>rescale</cite> has no effect</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.spatialimages.Header.default_x_flip">
<code class="descname">default_x_flip</code><em class="property"> = True</em><a class="headerlink" href="#nibabel.spatialimages.Header.default_x_flip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.Header.from_fileobj">
<em class="property">classmethod </em><code class="descname">from_fileobj</code><span class="sig-paren">(</span><em>klass</em>, <em>fileobj</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.from_fileobj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.Header.from_header">
<em class="property">classmethod </em><code class="descname">from_header</code><span class="sig-paren">(</span><em>klass</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.from_header" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.get_base_affine">
<code class="descname">get_base_affine</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.get_base_affine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.get_best_affine">
<code class="descname">get_best_affine</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.get_best_affine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.get_data_dtype">
<code class="descname">get_data_dtype</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.get_data_dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.get_data_shape">
<code class="descname">get_data_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.get_data_shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.get_zooms">
<code class="descname">get_zooms</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.get_zooms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.set_data_dtype">
<code class="descname">set_data_dtype</code><span class="sig-paren">(</span><em>dtype</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.set_data_dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.set_data_shape">
<code class="descname">set_data_shape</code><span class="sig-paren">(</span><em>shape</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.set_data_shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.set_zooms">
<code class="descname">set_zooms</code><span class="sig-paren">(</span><em>zooms</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.set_zooms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.Header.write_to">
<code class="descname">write_to</code><span class="sig-paren">(</span><em>fileobj</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.Header.write_to" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="headerdataerror">
<h2><a class="reference internal" href="#nibabel.spatialimages.HeaderDataError" title="nibabel.spatialimages.HeaderDataError"><code class="xref py py-class docutils literal"><span class="pre">HeaderDataError</span></code></a><a class="headerlink" href="#headerdataerror" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nibabel.spatialimages.HeaderDataError">
<em class="property">class </em><code class="descclassname">nibabel.spatialimages.</code><code class="descname">HeaderDataError</code><a class="headerlink" href="#nibabel.spatialimages.HeaderDataError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Class to indicate error in getting or setting header data</p>
<dl class="method">
<dt id="nibabel.spatialimages.HeaderDataError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.HeaderDataError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="headertypeerror">
<h2><a class="reference internal" href="#nibabel.spatialimages.HeaderTypeError" title="nibabel.spatialimages.HeaderTypeError"><code class="xref py py-class docutils literal"><span class="pre">HeaderTypeError</span></code></a><a class="headerlink" href="#headertypeerror" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nibabel.spatialimages.HeaderTypeError">
<em class="property">class </em><code class="descclassname">nibabel.spatialimages.</code><code class="descname">HeaderTypeError</code><a class="headerlink" href="#nibabel.spatialimages.HeaderTypeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Class to indicate error in parameters into header functions</p>
<dl class="method">
<dt id="nibabel.spatialimages.HeaderTypeError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.HeaderTypeError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="imagedataerror">
<h2><a class="reference internal" href="#nibabel.spatialimages.ImageDataError" title="nibabel.spatialimages.ImageDataError"><code class="xref py py-class docutils literal"><span class="pre">ImageDataError</span></code></a><a class="headerlink" href="#imagedataerror" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nibabel.spatialimages.ImageDataError">
<em class="property">class </em><code class="descclassname">nibabel.spatialimages.</code><code class="descname">ImageDataError</code><a class="headerlink" href="#nibabel.spatialimages.ImageDataError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<dl class="method">
<dt id="nibabel.spatialimages.ImageDataError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.ImageDataError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="imagefileerror">
<h2><a class="reference internal" href="#nibabel.spatialimages.ImageFileError" title="nibabel.spatialimages.ImageFileError"><code class="xref py py-class docutils literal"><span class="pre">ImageFileError</span></code></a><a class="headerlink" href="#imagefileerror" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nibabel.spatialimages.ImageFileError">
<em class="property">class </em><code class="descclassname">nibabel.spatialimages.</code><code class="descname">ImageFileError</code><a class="headerlink" href="#nibabel.spatialimages.ImageFileError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<dl class="method">
<dt id="nibabel.spatialimages.ImageFileError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.ImageFileError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="spatialimage">
<h2><a class="reference internal" href="#nibabel.spatialimages.SpatialImage" title="nibabel.spatialimages.SpatialImage"><code class="xref py py-class docutils literal"><span class="pre">SpatialImage</span></code></a><a class="headerlink" href="#spatialimage" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nibabel.spatialimages.SpatialImage">
<em class="property">class </em><code class="descclassname">nibabel.spatialimages.</code><code class="descname">SpatialImage</code><span class="sig-paren">(</span><em>dataobj</em>, <em>affine</em>, <em>header=None</em>, <em>extra=None</em>, <em>file_map=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Initialize image</p>
<p>The image is a combination of (array, affine matrix, header), with
optional metadata in <cite>extra</cite>, and filename / file-like objects contained
in the <cite>file_map</cite> mapping.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dataobj</strong> : object</p>
<blockquote>
<div><p>Object containg image data.  It should be some object that retuns an
array from <code class="docutils literal"><span class="pre">np.asanyarray</span></code>.  It should have a <code class="docutils literal"><span class="pre">shape</span></code> attribute
or property</p>
</div></blockquote>
<p><strong>affine</strong> : None or (4,4) array-like</p>
<blockquote>
<div><p>homogenous affine giving relationship between voxel coordinates and
world coordinates.  Affine can also be None.  In this case,
<code class="docutils literal"><span class="pre">obj.affine</span></code> also returns None, and the affine as written to disk
will depend on the file format.</p>
</div></blockquote>
<p><strong>header</strong> : None or mapping or header instance, optional</p>
<blockquote>
<div><p>metadata for this image format</p>
</div></blockquote>
<p><strong>extra</strong> : None or mapping, optional</p>
<blockquote>
<div><p>metadata to associate with image that cannot be stored in the
metadata of this image type</p>
</div></blockquote>
<p><strong>file_map</strong> : mapping, optional</p>
<blockquote class="last">
<div><p>mapping giving file information for this image format</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dataobj</em>, <em>affine</em>, <em>header=None</em>, <em>extra=None</em>, <em>file_map=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize image</p>
<p>The image is a combination of (array, affine matrix, header), with
optional metadata in <cite>extra</cite>, and filename / file-like objects contained
in the <cite>file_map</cite> mapping.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dataobj</strong> : object</p>
<blockquote>
<div><p>Object containg image data.  It should be some object that retuns an
array from <code class="docutils literal"><span class="pre">np.asanyarray</span></code>.  It should have a <code class="docutils literal"><span class="pre">shape</span></code> attribute
or property</p>
</div></blockquote>
<p><strong>affine</strong> : None or (4,4) array-like</p>
<blockquote>
<div><p>homogenous affine giving relationship between voxel coordinates and
world coordinates.  Affine can also be None.  In this case,
<code class="docutils literal"><span class="pre">obj.affine</span></code> also returns None, and the affine as written to disk
will depend on the file format.</p>
</div></blockquote>
<p><strong>header</strong> : None or mapping or header instance, optional</p>
<blockquote>
<div><p>metadata for this image format</p>
</div></blockquote>
<p><strong>extra</strong> : None or mapping, optional</p>
<blockquote>
<div><p>metadata to associate with image that cannot be stored in the
metadata of this image type</p>
</div></blockquote>
<p><strong>file_map</strong> : mapping, optional</p>
<blockquote class="last">
<div><p>mapping giving file information for this image format</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.spatialimages.SpatialImage.affine">
<code class="descname">affine</code><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.affine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nibabel.spatialimages.SpatialImage.dataobj">
<code class="descname">dataobj</code><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.dataobj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nibabel.spatialimages.SpatialImage.files_types">
<code class="descname">files_types</code><em class="property"> = (('image', None),)</em><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.files_types" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.filespec_to_file_map">
<em class="property">classmethod </em><code class="descname">filespec_to_file_map</code><span class="sig-paren">(</span><em>klass</em>, <em>filespec</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.filespec_to_file_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Make <cite>file_map</cite> for this class from filename <cite>filespec</cite></p>
<p>Class method</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>filespec</strong> : str</p>
<blockquote>
<div><p>Filename that might be for this image file type.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>file_map</strong> : dict</p>
<blockquote>
<div><p><cite>file_map</cite> dict with (key, value) pairs of (<code class="docutils literal"><span class="pre">file_type</span></code>,
FileHolder instance), where <code class="docutils literal"><span class="pre">file_type</span></code> is a string giving the
type of the contained file.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ImageFileError</strong> :</p>
<blockquote class="last">
<div><p>if <cite>filespec</cite> is not recognizable as being a filename for this
image type.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.filespec_to_files">
<em class="property">classmethod </em><code class="descname">filespec_to_files</code><span class="sig-paren">(</span><em>klass</em>, <em>filespec</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.filespec_to_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.from_file_map">
<em class="property">classmethod </em><code class="descname">from_file_map</code><span class="sig-paren">(</span><em>klass</em>, <em>file_map</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.from_file_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.from_filename">
<em class="property">classmethod </em><code class="descname">from_filename</code><span class="sig-paren">(</span><em>klass</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.from_filename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.from_files">
<em class="property">classmethod </em><code class="descname">from_files</code><span class="sig-paren">(</span><em>klass</em>, <em>file_map</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.from_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.from_filespec">
<em class="property">classmethod </em><code class="descname">from_filespec</code><span class="sig-paren">(</span><em>klass</em>, <em>filespec</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.from_filespec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.from_image">
<em class="property">classmethod </em><code class="descname">from_image</code><span class="sig-paren">(</span><em>klass</em>, <em>img</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.from_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Class method to create new instance of own class from <cite>img</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>img</strong> : <code class="docutils literal"><span class="pre">spatialimage</span></code> instance</p>
<blockquote>
<div><p>In fact, an object with the API of <code class="docutils literal"><span class="pre">spatialimage</span></code> -
specifically <code class="docutils literal"><span class="pre">dataobj</span></code>, <code class="docutils literal"><span class="pre">affine</span></code>, <code class="docutils literal"><span class="pre">header</span></code> and <code class="docutils literal"><span class="pre">extra</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>cimg</strong> : <code class="docutils literal"><span class="pre">spatialimage</span></code> instance</p>
<blockquote class="last">
<div><p>Image, of our own class</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.get_affine">
<code class="descname">get_affine</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.get_affine" title="Permalink to this definition">¶</a></dt>
<dd><p>Get affine from image</p>
<p>Please use the <cite>affine</cite> property instead of <cite>get_affine</cite>; we will
deprecate this method in future versions of nibabel.</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.get_data">
<code class="descname">get_data</code><span class="sig-paren">(</span><em>caching='fill'</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return image data from image with any necessary scalng applied</p>
<p>The image <code class="docutils literal"><span class="pre">dataobj</span></code> property can be an array proxy or an array.  An
array proxy is an object that knows how to load the image data from
disk.  An image with an array proxy <code class="docutils literal"><span class="pre">dataobj</span></code> is a <em>proxy image</em>; an
image with an array in <code class="docutils literal"><span class="pre">dataobj</span></code> is an <em>array image</em>.</p>
<p>The default behavior for <code class="docutils literal"><span class="pre">get_data()</span></code> on a proxy image is to read the
data from the proxy, and store in an internal cache.  Future calls to
<code class="docutils literal"><span class="pre">get_data</span></code> will return the cached array.  This is the behavior
selected with <cite>caching</cite> == &#8220;fill&#8221;.</p>
<p>Once the data has been cached and returned from an array proxy, if you
modify the returned array, you will also modify the cached array
(because they are the same array).  Regardless of the <cite>caching</cite> flag,
this is always true of an array image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>caching</strong> : {&#8216;fill&#8217;, &#8216;unchanged&#8217;}, optional</p>
<blockquote>
<div><p>See the Notes section for a detailed explanation.  This argument
specifies whether the image object should fill in an internal
cached reference to the returned image data array. &#8220;fill&#8221; specifies
that the image should fill an internal cached reference if
currently empty.  Future calls to <code class="docutils literal"><span class="pre">get_data</span></code> will return this
cached reference.  You might prefer &#8220;fill&#8221; to save the image object
from having to reload the array data from disk on each call to
<code class="docutils literal"><span class="pre">get_data</span></code>.  &#8220;unchanged&#8221; means that the image should not fill in
the internal cached reference if the cache is currently empty.  You
might prefer &#8220;unchanged&#8221; to &#8220;fill&#8221; if you want to make sure that
the call to <code class="docutils literal"><span class="pre">get_data</span></code> does not create an extra (cached)
reference to the returned array.  In this case it is easier for
Python to free the memory from the returned array.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>data</strong> : array</p>
<blockquote class="last">
<div><p>array of image data</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#nibabel.spatialimages.SpatialImage.uncache" title="nibabel.spatialimages.SpatialImage.uncache"><code class="xref py py-obj docutils literal"><span class="pre">uncache</span></code></a></dt>
<dd>empty the array data cache</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>All images have a property <code class="docutils literal"><span class="pre">dataobj</span></code> that represents the image array
data.  Images that have been loaded from files usually do not load the
array data from file immediately, in order to reduce image load time
and memory use.  For these images, <code class="docutils literal"><span class="pre">dataobj</span></code> is an <em>array proxy</em>; an
object that knows how to load the image array data from file.</p>
<p>By default (<cite>caching</cite> == &#8220;fill&#8221;), when you call <code class="docutils literal"><span class="pre">get_data</span></code> on a
proxy image, we load the array data from disk, store (cache) an
internal reference to this array data, and return the array.  The next
time you call <code class="docutils literal"><span class="pre">get_data</span></code>, you will get the cached reference to the
array, so we don&#8217;t have to load the array data from disk again.</p>
<p>Array images have a <code class="docutils literal"><span class="pre">dataobj</span></code> property that already refers to an
array in memory, so there is no benefit to caching, and the <cite>caching</cite>
keywords have no effect.</p>
<p>For proxy images, you may not want to fill the cache after reading the
data from disk because the cache will hold onto the array memory until
the image object is deleted, or you use the image <code class="docutils literal"><span class="pre">uncache</span></code> method.
If you don&#8217;t want to fill the cache, then always use
<code class="docutils literal"><span class="pre">get_data(caching='unchanged')</span></code>; in this case <code class="docutils literal"><span class="pre">get_data</span></code> will not
fill the cache (store the reference to the array) if the cache is empty
(no reference to the array).  If the cache is full, &#8220;unchanged&#8221; leaves
the cache full and returns the cached array reference.</p>
<p>The cache can effect the behavior of the image, because if the cache is
full, or you have an array image, then modifying the returned array
will modify the result of future calls to <code class="docutils literal"><span class="pre">get_data()</span></code>.  For example
you might do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nibabel</span> <span class="kn">as</span> <span class="nn">nib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nibabel.testing</span> <span class="kn">import</span> <span class="n">data_path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img_fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="s1">&#39;example4d.nii.gz&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">img_fname</span><span class="p">)</span> <span class="c1"># This is a proxy image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nib</span><span class="o">.</span><span class="n">is_proxy</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">dataobj</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The array is not yet cached by a call to &#8220;get_data&#8221;, so:
&gt;&gt;&gt; img.in_memory
False</p>
<p>After we call <code class="docutils literal"><span class="pre">get_data</span></code> using the default <cite>caching=&#8217;fill&#8217;, the cache
contains a reference to the returned array ``data`</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">in_memory</span>
<span class="go">True</span>
</pre></div>
</div>
<p>We modify an element in the returned data array:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">99</span>
</pre></div>
</div>
<p>The next time we call &#8216;get_data&#8217;, the method returns the cached
reference to the (modified) array:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_again</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_again</span> <span class="ow">is</span> <span class="n">data</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_again</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">99</span>
</pre></div>
</div>
<p>If you had <em>initially</em> used <cite>caching</cite> == &#8216;unchanged&#8217; then the returned
<code class="docutils literal"><span class="pre">data</span></code> array would have been loaded from file, but not cached, and:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">img_fname</span><span class="p">)</span>  <span class="c1"># a proxy image again</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">caching</span><span class="o">=</span><span class="s1">&#39;unchanged&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">in_memory</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_again</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">caching</span><span class="o">=</span><span class="s1">&#39;unchanged&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_again</span> <span class="ow">is</span> <span class="n">data</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_again</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.get_data_dtype">
<code class="descname">get_data_dtype</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.get_data_dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.get_filename">
<code class="descname">get_filename</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.get_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the image filename</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>None</strong> :</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>fname</strong> : None or str</p>
<blockquote class="last">
<div><p>Returns None if there is no filename, or a filename string.
If an image may have several filenames assoctiated with it
(e.g Analyze <code class="docutils literal"><span class="pre">.img,</span> <span class="pre">.hdr</span></code> pair) then we return the more
characteristic filename (the <code class="docutils literal"><span class="pre">.img</span></code> filename in the case of
Analyze&#8217;)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.get_header">
<code class="descname">get_header</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.get_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Get header from image</p>
<p>Please use the <cite>header</cite> property instead of <cite>get_header</cite>; we will
deprecate this method in future versions of nibabel.</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.get_shape">
<code class="descname">get_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.get_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Return shape for image</p>
<p>This function deprecated; please use the <code class="docutils literal"><span class="pre">shape</span></code> property instead</p>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.spatialimages.SpatialImage.header">
<code class="descname">header</code><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.header" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nibabel.spatialimages.SpatialImage.header_class">
<code class="descname">header_class</code><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.header_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#nibabel.spatialimages.Header" title="nibabel.spatialimages.Header"><code class="xref py py-class docutils literal"><span class="pre">Header</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.spatialimages.SpatialImage.in_memory">
<code class="descname">in_memory</code><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.in_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>True when array data is in memory</p>
</dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.instance_to_filename">
<em class="property">classmethod </em><code class="descname">instance_to_filename</code><span class="sig-paren">(</span><em>klass</em>, <em>img</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.instance_to_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Save <cite>img</cite> in our own format, to name implied by <cite>filename</cite></p>
<p>This is a class method</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>img</strong> : <code class="docutils literal"><span class="pre">spatialimage</span></code> instance</p>
<blockquote>
<div><p>In fact, an object with the API of <code class="docutils literal"><span class="pre">spatialimage</span></code> - specifically
<code class="docutils literal"><span class="pre">dataobj</span></code>, <code class="docutils literal"><span class="pre">affine</span></code>, <code class="docutils literal"><span class="pre">header</span></code> and <code class="docutils literal"><span class="pre">extra</span></code>.</p>
</div></blockquote>
<p><strong>filename</strong> : str</p>
<blockquote class="last">
<div><p>Filename, implying name to which to save image.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.load">
<em class="property">classmethod </em><code class="descname">load</code><span class="sig-paren">(</span><em>klass</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="nibabel.spatialimages.SpatialImage.make_file_map">
<em class="property">classmethod </em><code class="descname">make_file_map</code><span class="sig-paren">(</span><em>klass</em>, <em>mapping=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.make_file_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Class method to make files holder for this image type</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mapping</strong> : None or mapping, optional</p>
<blockquote>
<div><p>mapping with keys corresponding to image file types (such as
&#8216;image&#8217;, &#8216;header&#8217; etc, depending on image class) and values
that are filenames or file-like.  Default is None</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>file_map</strong> : dict</p>
<blockquote class="last">
<div><p>dict with string keys given by first entry in tuples in
sequence klass.files_types, and values of type FileHolder,
where FileHolder objects have default values, other than
those given by <cite>mapping</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.set_data_dtype">
<code class="descname">set_data_dtype</code><span class="sig-paren">(</span><em>dtype</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.set_data_dtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.set_filename">
<code class="descname">set_filename</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.set_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the files in the object from a given filename</p>
<p>The different image formats may check whether the filename has
an extension characteristic of the format, and raise an error if
not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>filename</strong> : str</p>
<blockquote class="last">
<div><p>If the image format only has one file associated with it,
this will be the only filename set into the image
<code class="docutils literal"><span class="pre">.file_map</span></code> attribute. Otherwise, the image instance will
try and guess the other filenames from this given filename.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.spatialimages.SpatialImage.shape">
<code class="descname">shape</code><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.to_file_map">
<code class="descname">to_file_map</code><span class="sig-paren">(</span><em>file_map=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.to_file_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.to_filename">
<code class="descname">to_filename</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.to_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Write image to files implied by filename string</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>filename</strong> : str</p>
<blockquote>
<div><p>filename to which to save image.  We will parse <cite>filename</cite>
with <code class="docutils literal"><span class="pre">filespec_to_file_map</span></code> to work out names for image,
header etc.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>None</strong> :</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.to_files">
<code class="descname">to_files</code><span class="sig-paren">(</span><em>file_map=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.to_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.to_filespec">
<code class="descname">to_filespec</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.to_filespec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.uncache">
<code class="descname">uncache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.uncache" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete any cached read of data from proxied data</p>
<p>Remember there are two types of images:</p>
<ul class="simple">
<li><em>array images</em> where the data <code class="docutils literal"><span class="pre">img.dataobj</span></code> is an array</li>
<li><em>proxy images</em> where the data <code class="docutils literal"><span class="pre">img.dataobj</span></code> is a proxy object</li>
</ul>
<p>If you call <code class="docutils literal"><span class="pre">img.get_data()</span></code> on a proxy image, the result of reading
from the proxy gets cached inside the image object, and this cache is
what gets returned from the next call to <code class="docutils literal"><span class="pre">img.get_data()</span></code>.  If you
modify the returned data, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="n">data</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">42</span>
</pre></div>
</div>
<p>then the next call to <code class="docutils literal"><span class="pre">img.get_data()</span></code> returns the modified array,
whether the image is an array image or a proxy image:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span> <span class="o">==</span> <span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
<p>When you uncache an array image, this has no effect on the return of
<code class="docutils literal"><span class="pre">img.get_data()</span></code>, but when you uncache a proxy image, the result of
<code class="docutils literal"><span class="pre">img.get_data()</span></code> returns to its original value.</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.spatialimages.SpatialImage.update_header">
<code class="descname">update_header</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.SpatialImage.update_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Harmonize header with image data and affine</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">affine</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">SpatialImage</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">affine</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">update_header</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">get_data_shape</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">get_zooms</span><span class="p">()</span>
<span class="go">(1.0, 2.0, 3.0)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="supported-np-types">
<h2>supported_np_types<a class="headerlink" href="#supported-np-types" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="nibabel.spatialimages.supported_np_types">
<code class="descclassname">nibabel.spatialimages.</code><code class="descname">supported_np_types</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.spatialimages.supported_np_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy data types that instance <cite>obj</cite> supports</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>obj</strong> : object</p>
<blockquote>
<div><p>Object implementing <cite>get_data_dtype</cite> and <cite>set_data_dtype</cite>.  The object
should raise <code class="docutils literal"><span class="pre">HeaderDataError</span></code> for setting unsupported dtypes. The
object will likely be a header or a <a class="reference internal" href="#nibabel.spatialimages.SpatialImage" title="nibabel.spatialimages.SpatialImage"><code class="xref py py-class docutils literal"><span class="pre">SpatialImage</span></code></a></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>np_types</strong> : set</p>
<blockquote class="last">
<div><p>set of numpy types that <cite>obj</cite> supports</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2006-2015, Matthew Brett, Michael Hanke and Eric Larson &lt;nipy-devel@neuroimaging.scipy.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>